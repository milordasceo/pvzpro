# 🗺️ Визуальная карта модуля "Сотрудники"

Наглядное представление структуры, компонентов и потоков данных модуля.

---

## 🎯 Общая схема модуля

```
┌──────────────────────────────────────────────────────────────────┐
│                    МОДУЛЬ "СОТРУДНИКИ"                            │
│                   (Управление персоналом)                         │
└──────────────────────────────────────────────────────────────────┘
                                 │
                 ┌───────────────┼───────────────┐
                 │               │               │
         ┌───────▼──────┐ ┌─────▼──────┐ ┌─────▼──────┐
         │   СПИСОК     │ │   ДЕТАЛИ   │ │   ФОРМА    │
         │  Employees   │ │  Employee  │ │  Employee  │
         │   Screen     │ │  Details   │ │   Form     │
         └──────────────┘ └────────────┘ └────────────┘
              │                 │               │
              │  [Поиск]       │  [Инфо]       │  [Ввод]
              │  [Фильтры]     │  [Статистика] │  [Валидация]
              │  [Карточки]    │  [История]    │  [Сохранение]
              │                 │               │
              └─────────────────┴───────────────┘
                                 │
                         ┌───────▼────────┐
                         │  ОБЩИЕ ЧАСТИ   │
                         │   (Shared)     │
                         └────────────────┘
                                 │
                    ┌────────────┼────────────┐
                    │            │            │
              ┌─────▼─────┐ ┌───▼────┐ ┌────▼─────┐
              │UI Компоне │ │ Hooks  │ │  Types   │
              │   нты     │ │(Логика)│ │ (Типы)   │
              └───────────┘ └────────┘ └──────────┘
```

---

## 📱 Экраны и навигация

```
┌─────────────────────────────────────────────────────────┐
│                    ADMIN DASHBOARD                      │
│                                                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐            │
│  │Dashboard │  │ Schedule │  │Employees │ ← ТЫ ЗДЕСЬ│
│  └──────────┘  └──────────┘  └──────────┘            │
└─────────────────────────────────────────────────────────┘
                                      │
                    ┌─────────────────┼─────────────────┐
                    │                 │                 │
                    │                 │                 │
        ┌───────────▼──────────┐     │     ┌──────────▼─────────┐
        │  СПИСОК СОТРУДНИКОВ  │     │     │  ДЕТАЛИ СОТРУДНИКА │
        │   EmployeesScreen    │     │     │EmployeeDetailsScreen│
        └──────────────────────┘     │     └────────────────────┘
                │                     │                │
                │ [onClick]           │                │ [Редактировать]
                │                     │                │
                │                     │                │
                └─────────────────────┼────────────────┘
                                      │
                          ┌───────────▼──────────┐
                          │  ФОРМА СОТРУДНИКА    │
                          │  EmployeeFormScreen  │
                          │  (Добавить/Изменить) │
                          └──────────────────────┘
```

---

## 🧩 Компоненты экрана "Список"

```
┌────────────────────────── EmployeesScreen ─────────────────────────┐
│                                                                     │
│  ┌────────────────────────────────────────────────────────────┐   │
│  │  🔍 SearchInput                          🎛️ IconButton      │   │
│  │  "Поиск по имени, телефону, ПВЗ..."      (Фильтр)          │   │
│  └────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌────────────────────── EmployeeFilters ───────────────────────┐ │
│  │  Статус:  [Все ▼]    ПВЗ: [Все ▼]    На смене: [Все ▼]     │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌────────────────────── FlatList ──────────────────────────────┐ │
│  │                                                               │ │
│  │  ┌──────────────────── EmployeeCard ─────────────────────┐  │ │
│  │  │  👤 [Аватар]    Иван Иванов                           │  │ │
│  │  │                 Сотрудник ПВЗ                         │  │ │
│  │  │                 📍 ПВЗ №1 (ТЦ Мега)                   │  │ │
│  │  │                 🟢 На смене                            │  │ │
│  │  │                                                        │  │ │
│  │  │  [💬 Чат]  [➕ Задача]                                │  │ │
│  │  └───────────────────────────────────────────────────────┘  │ │
│  │                                                               │ │
│  │  ┌──────────────────── EmployeeCard ─────────────────────┐  │ │
│  │  │  👤 Мария Петрова                                     │  │ │
│  │  │  ...                                                   │  │ │
│  │  └───────────────────────────────────────────────────────┘  │ │
│  │                                                               │ │
│  │  ...                                                          │ │
│  │                                                               │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘

                        │
                        │ onClick(employee)
                        ▼
              navigation.navigate('EmployeeDetails')
```

---

## 🔍 Компоненты экрана "Детали"

```
┌──────────────────── EmployeeDetailsScreen ─────────────────────────┐
│                                                                     │
│  ┌─────────────────── EmployeeHeader ──────────────────────────┐  │
│  │                                                               │  │
│  │                    👤 [Большой аватар 80x80]                 │  │
│  │                       🟢 (индикатор)                          │  │
│  │                                                               │  │
│  │                     Иван Иванов                              │  │
│  │                   Сотрудник ПВЗ                              │  │
│  │                   🟢 На смене                                 │  │
│  │                                                               │  │
│  │               [💬 Чат]  [📞 Звонок]                          │  │
│  │                                                               │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌─────────────────── EmployeeStats ───────────────────────────┐  │
│  │  Статистика                                                  │  │
│  │  ┌─────────────┐  ┌─────────────┐                           │  │
│  │  │ 📅 Смен: 48 │  │ ⏱️ Часов:384│                           │  │
│  │  └─────────────┘  └─────────────┘                           │  │
│  │  ┌─────────────┐  ┌─────────────┐                           │  │
│  │  │⭐Рейтинг:4.8│  │✅ Задач:123 │                           │  │
│  │  └─────────────┘  └─────────────┘                           │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌────────────── EmployeeInfoSection "Контакты" ──────────────┐  │
│  │  📞 Телефон:  +7 999 123 45 67                             │  │
│  │  ✉️  Email:    ivan@example.com                             │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌────────────── EmployeeInfoSection "Работа" ────────────────┐  │
│  │  👤 Должность:  Сотрудник ПВЗ                               │  │
│  │  📍 ПВЗ:        ПВЗ №1 (ТЦ Мега)                            │  │
│  │  📅 Дата найма: 15 января 2024                              │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌────────────── EmployeeInfoSection "Финансы" ───────────────┐  │
│  │  💰 Заработано:  45 000 ₽                                   │  │
│  │  🎁 Премии:      +5 000 ₽                                   │  │
│  │  ⚠️  Штрафы:      -1 000 ₽                                  │  │
│  │  💵 Итого:       49 000 ₽  (выделено)                       │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌────────────── EmployeeShiftHistory ─────────────────────────┐  │
│  │  История смен                                                │  │
│  │  ✅ 01.11.2025 - 8 ч 30 мин                                 │  │
│  │  ✅ 30.10.2025 - 9 ч 15 мин                                 │  │
│  │  ✅ 28.10.2025 - 8 ч 00 мин                                 │  │
│  │  [Показать всё] ─────────────────────────────                │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│  [Редактировать]                               [Удалить]           │
└─────────────────────────────────────────────────────────────────────┘
                        │
                        │ onClick(Редактировать)
                        ▼
              navigation.navigate('EmployeeForm')
```

---

## ✏️ Компоненты экрана "Форма"

```
┌──────────────────── EmployeeFormScreen ────────────────────────────┐
│                                                                     │
│  📝 Новый сотрудник  (или "Редактирование: Иван Иванов")          │
│                                                                     │
│  ┌────────────────── Фото профиля ──────────────────────────────┐ │
│  │                    👤 [Кликабельный аватар]                   │ │
│  │                       📷 Загрузить/изменить                   │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌────────────────── Основная информация ───────────────────────┐ │
│  │  Имя и фамилия *                                              │ │
│  │  [_____________________________________________]               │ │
│  │                                                                │ │
│  │  Телефон *                                                     │ │
│  │  [+7 999 123 45 67]                                            │ │
│  │                                                                │ │
│  │  Email (опционально)                                           │ │
│  │  [example@email.com]                                           │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌────────────────── Должность и статус ────────────────────────┐ │
│  │  Должность *                                                   │ │
│  │  [Сотрудник ▼]                                                 │ │
│  │  • Стажёр                                                      │ │
│  │  • Сотрудник                                                   │ │
│  │  • Старший сотрудник                                           │ │
│  │  • Менеджер                                                    │ │
│  │                                                                │ │
│  │  Статус занятости                                              │ │
│  │  [Выходной ▼]                                                  │ │
│  │                                                                │ │
│  │  ☑️ Активен (в штате)                                          │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌────────────────── Привязка к ПВЗ ────────────────────────────┐ │
│  │  Выберите ПВЗ *                                                │ │
│  │  [ПВЗ №1 (ТЦ Мега) ▼]                                          │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌────────────────── Дополнительно ─────────────────────────────┐ │
│  │  Дата найма                                                    │ │
│  │  [15.01.2024 📅]                                               │ │
│  │                                                                │ │
│  │  Базовая зарплата (₽/мес)                                      │ │
│  │  [45 000]                                                      │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│  [Отмена]                                          [Сохранить]     │
└─────────────────────────────────────────────────────────────────────┘
                        │
                        │ onClick(Сохранить)
                        ▼
                  validate() → submit()
                        │
                        ▼
                 API: POST/PUT
                        │
                        ▼
              navigation.goBack()
```

---

## 🔄 Поток данных: Загрузка списка

```
[Пользователь]
      │
      │ Открывает экран "Сотрудники"
      ▼
┌─────────────────────┐
│ EmployeesScreen     │
│ useEmployees(filters)│
└──────────┬──────────┘
           │
           │ fetchEmployees()
           ▼
┌─────────────────────┐
│ useEmployees hook   │
│ (бизнес-логика)     │
└──────────┬──────────┘
           │
           │ employeeService.getAll(filters)
           ▼
┌─────────────────────┐
│ employeeService     │
│ (API слой)          │
└──────────┬──────────┘
           │
           │ GET /api/employees?status=active
           ▼
┌─────────────────────┐
│ Backend API         │
│ (сервер)            │
└──────────┬──────────┘
           │
           │ Response: { data: AdminEmployee[] }
           ▼
┌─────────────────────┐
│ useEmployees hook   │
│ setEmployees(data)  │
└──────────┬──────────┘
           │
           │ Обновление состояния
           ▼
┌─────────────────────┐
│ EmployeesScreen     │
│ Рендерит FlatList   │
└──────────┬──────────┘
           │
           │ Для каждого сотрудника
           ▼
┌─────────────────────┐
│ EmployeeCard ×N     │
│ (карточки)          │
└─────────────────────┘
```

---

## 🔄 Поток данных: Создание сотрудника

```
[Пользователь]
      │
      │ Нажимает "Добавить"
      ▼
┌─────────────────────┐
│ EmployeeFormScreen  │
│ useEmployeeForm()   │
└──────────┬──────────┘
           │
           │ Заполняет форму
           │ onChange(field, value)
           ▼
┌─────────────────────┐
│ useEmployeeForm hook│
│ setFormData({...})  │
└──────────┬──────────┘
           │
           │ Нажимает "Сохранить"
           │ submit()
           ▼
┌─────────────────────┐
│ useEmployeeForm hook│
│ validate()          │
└──────────┬──────────┘
           │
           │ Если есть ошибки → показать
           │ Если нет ошибок → продолжить
           ▼
┌─────────────────────┐
│ employeeService     │
│ .create(formData)   │
└──────────┬──────────┘
           │
           │ POST /api/employees
           ▼
┌─────────────────────┐
│ Backend API         │
└──────────┬──────────┘
           │
           │ Response: { data: AdminEmployee }
           ▼
┌─────────────────────┐
│ useEmployeeForm hook│
│ return success      │
└──────────┬──────────┘
           │
           │ navigation.goBack()
           ▼
┌─────────────────────┐
│ EmployeesScreen     │
│ refresh()           │
└─────────────────────┘
           │
           │ Сотрудник добавлен в список ✅
           ▼
    [Пользователь видит
     нового сотрудника]
```

---

## 🎨 Цветовая схема

```
╔══════════════════════════════════════════════════════════╗
║                  ЦВЕТА СТАТУСОВ                          ║
╚══════════════════════════════════════════════════════════╝

┌────────────────────────────────────────────────────────┐
│ Статусы занятости:                                     │
│                                                        │
│  🟢 На смене      →  #10B981  (Зелёный)               │
│  ⚪ Выходной      →  #9CA3AF  (Серый)                 │
│  🟡 Больничный    →  #F59E0B  (Оранжевый)             │
│  🔵 Отпуск        →  #3B82F6  (Синий)                 │
│  🔴 Уволен        →  #EF4444  (Красный)               │
│                                                        │
└────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────┐
│ Должности:                                             │
│                                                        │
│  🔵 Стажёр        →  #3B82F6  (Синий)                 │
│  🟣 Сотрудник     →  #8B5CF6  (Фиолетовый)            │
│  🟠 Старший       →  #F59E0B  (Оранжевый)             │
│  🟢 Менеджер      →  #10B981  (Зелёный)               │
│                                                        │
└────────────────────────────────────────────────────────┘
```

---

## 📏 Размеры и отступы

```
╔══════════════════════════════════════════════════════════╗
║                  РАЗМЕРЫ ЭЛЕМЕНТОВ                       ║
╚══════════════════════════════════════════════════════════╝

Аватары:
  ┌──────┐
  │  60  │  ← В списке
  └──────┘

  ┌──────┐
  │  80  │  ← На экране деталей
  └──────┘

  ┌──────┐
  │ 100  │  ← В форме редактирования
  └──────┘

Отступы:
  ├──16──┤  screenPadding (от краёв)
  ├──16──┤  cardPadding (внутри карточки)
  ├──12──┤  cardGap (между карточками)
  ├──24──┤  sectionGap (между секциями)
  ├───8──┤  elementGap (между элементами)

Радиусы:
  ╭─12─╮   cardRadius (карточки)
  ╰────╯

  ╭─8──╮   buttonRadius (кнопки)
  ╰────╯

  ╭4╮       badgeRadius (бейджи)
  ╰─╯
```

---

## 📦 Структура файлов (упрощённо)

```
src/admin/screens/employees/
│
├── 📄 EmployeesScreen.tsx          ← Список (✅ готов)
├── 📄 EmployeeDetailsScreen.tsx    ← Детали (создать)
├── 📄 EmployeeFormScreen.tsx       ← Форма (создать)
│
├── 📁 components/
│   ├── EmployeeCard.tsx            ← ✅ готов
│   ├── EmployeeFilters.tsx         ← ✅ готов
│   ├── EmployeeHeader.tsx          ← создать
│   ├── EmployeeStats.tsx           ← создать
│   ├── EmployeeInfoSection.tsx     ← создать
│   └── EmployeeShiftHistory.tsx    ← создать
│
├── 📁 hooks/
│   ├── useEmployees.ts             ← ✅ готов
│   ├── useEmployeeDetails.ts       ← создать
│   ├── useEmployeeForm.ts          ← создать
│   └── useEmployeeActions.ts       ← создать
│
└── 📁 types/
    └── employee.types.ts           ← создать
```

---

## 🎯 Ключевые моменты

### ✅ Что уже есть:

- Список с поиском и фильтрами
- Красивые карточки сотрудников
- Хук для загрузки данных
- Типы `AdminEmployee`

### ❌ Что нужно создать:

- Экран деталей (с 5 компонентами)
- Форму добавления/редактирования
- 4 новых хука
- Типы для формы
- Интеграцию с API

### ⏱️ Сколько времени:

- **Минимум:** 10 часов (если делать быстро)
- **Комфортно:** 15 часов (с тестированием)
- **С полировкой:** 20 часов (с анимациями)

---

## 🚀 Начни отсюда!

1. **Прочитай:** [Быстрый старт](quick-start.md)
2. **Посмотри:** [Архитектуру](architecture.md)
3. **Реализуй:** По [Плану](implementation-plan.md)

**Удачи!** 💪
